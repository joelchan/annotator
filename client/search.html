<template name="AnalogySearcher">
    <a href="" data-toggle="modal" data-target="#highlightDocs" style="display:none;" data-backdrop="static" class="highlightDocButton"></a>
    <div class="container search-container">
        <div class="row">
            <div class="col-md-4 col-xs-4 seed">
                {{> SeedDocument}}
            </div>
            <div class="col-md-4 col-xs-4">
                <div class="row search-bar">
                    {{> SearchBar}}
                    {{> SearchHelp}}
                </div>
                <div class="row results">
                    {{> SearchResults}}
                </div>
            </div>
            <div class="col-md-4 col-xs-4 selections-container">
                {{> Selections}}
                {{> Highlighter}}
            </div>
        </div>
    </div>
</template>

<template name="SeedDocument">
    <h3>Target document</h3>
    <button class="btn btn-danger change-seed disabled" style="margin-bottom:10px;">No good matches. Give me a new document.</button>
    <div id="seed-doc" class="col-md-12 col-xs-12 doc">
        <h4>{{title}}</h4>
        <p class="seed-clickable">{{content}}</p>
        <!-- {{#each sentences}} -->
            <!-- {{> sentence}} -->
        <!-- {{/each}} -->
    </div>
    <h3>Recent search queries</h3>
    {{#each searches}}
        {{> SearchItem}}
    {{/each}}
</template>

<template name="SearchBar">
    <div class="search-bar">
        <h3>Search for matches <span class="search-help">(<a href="" data-toggle="modal" data-target="#searchHelp">Need help?</a>)</span></h3>
        <div class="input-group input-group-sm idea-search">
          <span class="input-group-btn">
            <button class="btn btn-default search-apply-btn disabled" type="buttonmargin-left:20%">
                <i class="glyphicon glyphicon-search"></i>
            </button>
          </span>
          <input type="text" id="search-query" class="form-control" placeholder="Enter keywords to search for matches..." disabled>
          <span class="input-group-btn">
            <button class="btn btn-default search-remove-btn disabled" type="button">
                <i class="glyphicon glyphicon-remove"></i>
            </button>
          </span>
        </div>
    </div>
</template>

<template name="Selections">
    <h3>Best match</h3>
    <div class="selection-controls">
          <textarea rows="2" class="form-control" id="matchDescription" placeholder="Describe the key problem/mechanism shared by the selected match and target document"></textarea>
          <button class="btn btn-success submit-match disabled">Submit match</button>
    </div>
    <div class='best-matches'>
          {{#each bestMatches}}
            {{> Document}}
          {{/each}}
          <div class="col-md-12 col-xs-12 doc doc-match sample-best">
              <div class="doc-header" style="margin-bottom: 5px;">
                  <div class="btn-group" role="group">
                      <button id="match-remove-{{_id}}" class="btn btn-secondary match-remove match-status disabled">Not match</button>
                      <button id="match-add-{{_id}}" class="btn btn-secondary match-add match-status disabled">Possible match</button>
                      <button id="match-best-{{_id}}" class="btn btn-primary match-best match-status disabled">Best match</button>
                  </div>
              </div>
              <div class="doc-content">
                  This is an example of a best match for the seed document.
              </div>
          </div>
    </div>
    <h3>{{numPossible}} possible matches</h3>
    <div class="selections">

        {{#each possibleMatches}}
            {{> Document}}
        {{/each}}

        <div class="col-md-12 col-xs-12 doc doc-match sample-possible">
            <div class="doc-header" style="margin-bottom: 5px;">
                <div class="btn-group" role="group">
                    <button id="match-remove-{{_id}}" class="btn btn-secondary match-remove match-status disabled">Not match</button>
                    <button id="match-add-{{_id}}" class="btn btn-primary match-add match-status disabled">Possible match</button>
                    <button id="match-best-{{_id}}" class="btn btn-secondary match-best match-status disabled">Best match</button>
                </div>
            </div>
            <div class="doc-content">
                This is an example of a possible match for the seed document.
            </div>
        </div>

    </div>
</template>

<template name="Document">
    <div class="doc-container" id="doc-{{_id}}">
        <div class="col-md-12 col-xs-12 doc doc-match">
            <div class="doc-header" style="margin-bottom: 5px;">
                <div class="btn-group" role="group">
                {{#if isBestMatch}}
                    <button id="match-remove-{{_id}}" class="btn btn-secondary match-remove match-status">Not match</button>
                    <button id="match-add-{{_id}}" class="btn btn-secondary match-add match-status">Possible match</button>
                    <button id="match-best-{{_id}}" class="btn btn-primary match-best match-status">Best match</button>
                {{else}} {{#if isPossibleMatch}}
                            <button id="match-remove-{{_id}}" class="btn btn-secondary match-remove match-status">Not match</button>
                            <button id="match-add-{{_id}}" class="btn btn-primary match-add match-status">Possible match</button>
                            <button id="match-best-{{_id}}" class="btn btn-secondary match-best match-status">Best match</button>
                         {{else}}
                            <button id="match-remove-{{_id}}" class="btn btn-danger match-remove match-status">Not match</button>
                            <button id="match-add-{{_id}}" class="btn btn-secondary match-add match-status">Possible match</button>
                            <button id="match-best-{{_id}}" class="btn btn-secondary match-best match-status">Best match</button>
                        {{/if}}
                {{/if}}
                </div>
            </div>
            <div class="doc-content">
                <h4>{{theTitle}}</h4>
                <p class="match-clickable">{{theContent}}</p>
            </div>
            <!-- {{#each sentences}} -->
                <!-- {{> sentence}} -->
            <!-- {{/each}} -->
        </div>
        <!-- <div class="col-md-2 col-xs-2 match-action">
            {{#if isSelected}}
                <button id="match-remove-{{_id}}" class="btn btn-danger match-remove"><span class="glyphicon glyphicon-remove"></span></button>
            {{else}}
                <button id="match-add-{{_id}}" class="btn btn-success match-add"><span class="glyphicon glyphicon-ok"></span></button>
            {{/if}}
        </div> -->
    </div>
</template>

<template name="SearchResults">
    {{#if hasMatches}}
        <h3>{{numMatches}} results</h3>
    {{else}}
        <h3>No results!</h3>
    {{/if}}
    <div class="search-results">
        <!-- <img class="loading" src="/Preloader_4.gif"> -->
        {{#if isLoading}}
          <img class="loading" src="/Preloader_4.gif">
        {{else}}
          {{#if hasMatches}}
              {{#each matchingDocs}}
                  {{> Document}}
              {{/each}}
          {{/if}}
        {{/if}}
        <div class="col-md-12 col-xs-12 doc doc-match sample-search">
            <div id="sample-doc-header" class="doc-header" style="margin-bottom: 5px;">
                <div class="btn-group" role="group">
                    <button id="match-remove-{{_id}}" class="btn btn-danger match-remove match-status disabled">Not match</button>
                    <button id="match-add-{{_id}}" class="btn btn-secondary match-add match-status disabled">Possible match</button>
                    <button id="match-best-{{_id}}" class="btn btn-secondary match-best match-status disabled">Best match</button>
                </div>
            </div>
            <div class="doc-content">
                This is an example of search result that is not currently a match for the seed document.
            </div>
        </div>
    </div>
</template>

<template name="SearchHelp">
    <!-- Modal -->
    <div class="modal fade" id="searchHelp" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Instructions/Help</h4>
          </div>
          <div class="modal-body">
            <h3>What am I looking for again?</h3>
            <div class="inst-start">
                <p>We need you to help us find a good <b>analogy</b> for a target product description. Two products are analogous if they both <b>solve a closely related problem</b> and/or the same/different problem using <b>similar key mechanisms.</b></p>
                <p>As an example, consider the following two product descriptions.</p>
                <div class="container">
                    <div class="col-md-4 col-xs-4 doc" style="margin-right:10px;">
                        Glide is designed to keep a chef's fingers safe from slicing, along with the stench of garlic or onion. The device clips discreetly onto your knife, moving effortlessly up and down the blade to clean it without the need for napkins or fingers.
                    </div>
                    <div class="col-md-4 col-xs-4 doc">
                        Broom Groomer is a step-on dustpan with added functionality that makes sweeping easier. Rubber "teeth" on the back of the dustpan let you quickly and easily comb out dust bunnies from your broom's bristles.
                    </div>
                </div>
                <p>These two products are analogous because they both <b>SEPARATE</b> objects <span>(chopped food, dust bunnies)</span> from a host object <span>(knife, broom bristles)</span> by <b>CAUSING</b> the host object to <b>PASS THROUGH</b> another object <span>(clip, rubber teeth)</span></p>
            </div>
            <!-- <div class="inst-superficial">
                <p>We are specifically <b>not</b> looking for matches to a product based on <u>superficial similarity</u>, but do not solve similar problems or use similar key mechanisms. For example, consider the following pair of products, which are similar in that they are both "food/cooking/kitchen" products, but solve very different problems with different mechanisms.</p>
                <div class="container">
                    <div class="col-md-4 col-xs-4 doc" style="margin-right:10px;">
                        Glide is designed to keep a chef's fingers safe from slicing, along with the stench of garlic or onion. The device clips discreetly onto your knife, moving effortlessly up and down the blade to clean it without the need for napkins or fingers.
                    </div>
                    <div class="col-md-4 col-xs-4 doc">
                        Mocubo is a bamboo cutting board with three food prep containers. You'll be able to slice, dice and organize like a master chef, without breaking a sweat.
                    </div>
                </div>
            </div> -->
            <h3>How do I find good matches?</h3>
            <p>Here are some strategies that others have found to be useful:</p>
            <ul>
                <li>Try to think of the most unique or core attribute of the target product.</li>
                <li>Try to think of synonyms or related words for your keywords (e.g., "protect" >> ["defend", "shield", "fortify", "secure"].</li>
                <li>Try to think of more general/abstract versions of your keywords (e.g., "strain" >> "extract/remove" >> "separate").</li>
            </ul>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Got it</button>
          </div>
        </div>
      </div>
    </div>
</template>

<template name="SearchItem">
    <button class="btn btn-default search-query-item" type="button" id="{{_id}}">
      {{query}}
      <!-- <span class="badge">{{numMatches}}</span> -->
    </button>
</template>

<template name="Highlighter">
    <!-- Modal -->
    <div class="modal fade" id="highlightDocs" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button> -->
            <h4 class="modal-title" id="myModalLabel">Final Step: Highlight Document Keywords</h4>
          </div>
          <div class="modal-body">
            <!-- <h3>What am I looking for again?</h3> -->
            <div class="inst-start">
                <p>Great!! Now for one final step. Please highlight the parts of each document that form the basis of the match. Do this by clicking on the key words that describe the shared problem/mechanism. As a reminder, here is your summary of how the two documents are related:</p>
                <p><strong>{{summary}}</strong></p>
                <div class="container">
                    <div class="col-md-4 col-xs-4 doc highlight-seed-doc" style="margin-right:10px;">
                        {{#each seedWords}}
                            <span class="doc-word seed-word">{{word}} </span>
                        {{/each}}
                    </div>
                    <div class="col-md-4 col-xs-4 doc highlight-match-doc">
                        {{#each matchWords}}
                            <span class="doc-word match-word">{{word}} </span>
                        {{/each}}
                    </div>
                </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Finished</button>
          </div>
        </div>
      </div>
    </div>
</template>
