<template name="annotationPage">
    <div class="container">
        <!-- {{#if isLoggedIn}} -->
            {{>annotateTask}}
        <!-- {{else}} -->
            <!-- {{> annotateLogin}} -->
        <!-- {{/if}} -->
    </div>
</template>

<template name="annotateLogin">
    Please login or create an account before continuing. Use your MTurkID as your username.
</template>

<template name="annotateTask">
    <!-- <h1>Document has been finished by {{numAnnotations}} total people</h1> -->
    <div class="row instructions">
        <!-- <p>Please read the product description below and help us:</p>
        <ol>
            <li>
                Summarize the <span class="key-purpose">problem</span> and <span class="key-mechanism">mechanism(s)</span> of the product in the textboxes below.
            </li>
            <li>
                Annotate the description to mark the individual words that best signal the unique <span class="key-purpose">problem</span> and/or <span class="key-mechanism">mechanism(s)</span> of the product. Mark a word by clicking on it and selecting the appropriate keyword type (e.g., problem or mechanism). You may mark as many words as you think will help.
            </li>
        </ol>
        <p>Click on the "I'm finished" button below when you are done.</p> -->
        <p>Highlight the <span class="key-background">background/implications</span>, <span class="key-purpose">purpose</span>, <span class="key-mechanism">mechanism</span>, and <span class="key-finding">finding</span> aspects of the abstract below. Select a highlight button to activate a highlight state. Then select parts of the text to apply the highlight state.</p>
        <a href="#tips" data-toggle="collapse" aria-expanded="false" aria-controls="tips">Show/hide tips/examples</a>
        <div class="collapse row" id="tips">
          <div class="col-md-12 col-xs-12">
            <h3>Tips</h3>
            <ul>
              <li><strong><u>Keywords can signal when the paper is talking about the why/what/how</u></strong>. For example, <span class="key-finding">findings</span> are often signaled with phrases like "we demonstrate..." or "we find that...". A paper's <span class="key-purpose">purpose</span> might often be "to better understand...". The <span class="background">implications</span> of the work can also be signaled by phrases like "based on these findings..."</li>
              <li>You might also <strong><u>use the position of phrases/sentences in the abstract as a heuristic</u></strong>. For example, it's common for the "why" of the paper (including the <span class="key-background">background</span> and <span class="key-purpose">purpose</span>) of the work to be described in the beginning, followed by the <span class="key-mechanism">mechanism</span> and <span class="key-finding">findings</span> of the work. Sometimes, the abstract also circles back to the <span class="key-background">implications</span> of the work.</li>
              <li>Note that these are just heuristics that we've found helpful! If you come across any new ones, we'd love to hear them!</li>
            </ul>
            <h3>Examples</h3>
            <div class="col-md-5 col-xs-5 doc example">
              <span class="key-purpose">In this paper we explore the challenges in crowdsourcing the task of translation over the web in which remotely located translators work on providing translations independent of each other.</span> <span class="key-mechanism">We then propose a collaborative workflow for crowdsourcing translation to address some of these challenges. In our pipeline model, the translators are working in phases where output from earlier phases can be enhanced in the subsequent phases. </span> <span class="key-background">We also highlight some of the novel contributions of the pipeline model like assistive translation and translation synthesis that can leverage monolingual and bilingual speakers alike. </span> <span class="key-finding">We evaluate our approach by eliciting translations for both a minority-to-majority language pair and a minority-to-minority language pair. We observe that in both scenarios, our workflow produces better quality translations in a cost-effective manner, when compared to the traditional crowdsourcing workflow.</span>
            </div>
            <div class="col-md-5 col-xs-5 doc example">
              <span class="key-background">Though toolkits exist to create complex crowdsourced workflows, there is limited support for management of those workflows</span>. <span class="key-purpose">Managing crowd workers and tasks requires significant iteration and experimentation on task instructions, rewards, and flows. We present CrowdWeaver, a system to visually manage complex crowd work</span>. <span class="key-mechanism">The system supports the creation and reuse of crowdsourcing and computational tasks into integrated task flows, manages the flow of data between tasks, and allows tracking and notification of task progress, with support for real-time modification.</span> <span class="key-finding">We describe the system and demonstrate its utility through case studies and user feedback.</span>
            </div>
          </div>
        </div>
        <hr/>
        <label>Highlight buttons:</label>
        <br/>
        <div class="btn-group" role="group" aria-label="...">
          <button type="button" class="btn btn-default background init-highlight">Highlight{{statusBackground}} background/implications</button>
          <button type="button" class="btn btn-default purpose init-highlight">Highlight{{statusPurpose}} purpose</button>
          <button type="button" class="btn btn-default mechanism init-highlight">Highlight{{statusMechanism}} mechanism</button>
          <button type="button" class="btn btn-default finding init-highlight">Highlight{{statusFinding}} finding</button>
          <button type="button" class="btn btn-default unmark init-highlight">Unhighlight{{statusUnmark}}</button>
          <!-- <button type="button" class="btn btn-default none init-highlight">Stop highlighting</button> -->
        </div>
        <p><span class="highlight-description" style="display:none;">{{highlightDescription}}</span></p>
    <!-- <div class="divider">
      <div class="btn-group" role="group" aria-label="...">
        <button type="button" class="btn btn-default background init-highlight">Highlight background</button>
        <button type="button" class="btn btn-default purpose init-highlight">Highlight purpose</button>
        <button type="button" class="btn btn-default mechanism init-highlight">Highlight mechanism</button>
        <button type="button" class="btn btn-default finding init-highlight">Highlight finding</button>
        <button type="button" class="btn btn-default unmark init-highlight">Remove highlights</button>
        <button type="button" class="btn btn-default none init-highlight">Stop highlighting</button>
      </div>
    </div> -->
    </div>
    <div class="row doc-data">
        <div class="col-md-6 col-xs-6 doc">
            {{#each sentences}}
                {{> sentence}}
            {{/each}}
        </div>
        <div class="col-md-6 col-xs-6 summary">
            <!-- <label>Notes (optional)</label>
            <textarea class="form-control" id="summ-purp" rows="3" placeholder="Use this space to write any thoughts you have on the document while highlighting (e.g., is there anything weird about the abstract?)"></textarea>
            <br/>
            <label>Feedback (optional)</label>
            <textarea class="form-control" id="summ-mech" rows="3" placeholder="Write any thoughts you had on the task design here. What did you like/dislike? How can we do better?"></textarea> -->
            <div class="controls">
                <!-- take the user to confirmation page -->
                <!-- <button class="finished btn btn-success">I'm finished!</button> -->
                <button type="button" class="finished btn btn-success btn-lg " id="load" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> Processing Submission">I'm finished!</button>
                <!-- take the user to confirmation page -->
                <!-- <button class="another btn btn-default">Get me another!</button> -->
            </div>
        </div>
    </div>
</template>

<template name="sentence">
    <p>
        {{#each words}}
            {{> word}}
        {{/each}}
    </p>
</template>

<template name="word">
    <!-- Single button -->
    <!-- <div class="btn-group token-container"> -->
    <span class="token {{keyType}}" id="word-{{_id}}">
      {{content}}
    </span>
</template>
